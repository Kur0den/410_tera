<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>410 Gone</title>
        <style>
            * {
                text-align: center;
            }
            #button {
                border-radius: 20px;
            }
        </style>
    </head>
    <body>
        <h1>410 Gone</h1>
        <hr />
        <p id="go~ne">ご～ん...</p>
        <audio controls autoplay id="gone">
            <source src="sound.mp3" type="audio/mpeg" />
        </audio>
        <p>
            audio:
            <a href="https://otologic.jp/free/se/temple-bells01.html"
                >Otologic</a
            >
        </p>
        <p id="playCount"></p>
        <p id="clear"></p>
        <script>
            var audio = document.getElementById('gone');
            var playCountElement = document.getElementById('playCount');
            var clearElement = document.getElementById('clear');
            var text = document.getElementById('go~ne');
            var count = 0;

            function bonnoCheck() {
                if (count < 108) {
                    playCountElement.textContent = '払った煩悩の数: ' + count;
                } else {
                    playCountElement.textContent = '払った煩悩の数: ' + count;
                    clearElement.textContent =
                        '煩悩が無事410を返すようになりました';
                }
            }

            audio.onended = function () {
                count++;
                bonnoCheck();
                if (count < 108) {
                    audio.play();
                }
            };
            text.addEventListener('click', function () {
                count++;
                bonnoCheck();
                var buttonAudio = new Audio('sound.mp3');
                buttonAudio.play();
            });
        </script>
    </body>
</html>
